{% extends 'custom_admin/base.html' %}

{% block title %}My Profile - MediCare Admin{% endblock %}

{% block content %}
<style>
    .profile-container {
        max-width: 1000px;
        margin: 0 auto;
    }
    
    .profile-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
    }
    
    .profile-header {
        display: flex;
        align-items: center;
        gap: 2rem;
        padding-bottom: 2rem;
        border-bottom: 2px solid #f0f0f0;
        margin-bottom: 2rem;
    }
    
    .profile-avatar-large {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, #56CCF2, #2F80ED);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3rem;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(47, 128, 237, 0.3);
    }
    
    .profile-info {
        flex: 1;
    }
    
    .profile-name {
        font-size: 2rem;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 0.5rem;
    }
    
    .profile-role {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 1rem;
    }
    
    .profile-badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #56CCF2, #2F80ED);
        color: white;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
    }
    
    .profile-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
    }
    
    .detail-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .detail-label {
        font-size: 0.85rem;
        color: #666;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .detail-value {
        font-size: 1.1rem;
        color: var(--dark);
        font-weight: 500;
    }
    
    .detail-value.empty {
        color: #999;
        font-style: italic;
    }
    
    .btn-edit-profile {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #56CCF2, #2F80ED);
        color: white;
        text-decoration: none;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s;
    }
    
    .btn-edit-profile:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(47, 128, 237, 0.3);
        color: white;
    }
    
    .profile-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .stat-card {
        background: linear-gradient(135deg, #56CCF2, #2F80ED);
        color: white;
        padding: 1.5rem;
        border-radius: 15px;
        text-align: center;
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        font-size: 0.9rem;
        opacity: 0.9;
    }
</style>

<div class="profile-container">
    <div class="page-header" style="margin-bottom: 2rem;">
        <h1 style="font-size: 2.5rem; font-weight: 700; color: var(--dark);">
            <i class="fas fa-user-circle"></i> My Profile
        </h1>
        <p style="color: #666; margin-top: 0.5rem;">Manage your account information and settings</p>
    </div>
    
    <!-- Profile Stats -->
    {% if user.role == 'doctor' or user.role == 'nurse' %}
    <div class="profile-stats">
        <div class="stat-card">
            <div class="stat-value">{{ user.registered_patients.count }}</div>
            <div class="stat-label">Registered Patients</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ user.medicalhistory_set.count }}</div>
            <div class="stat-label">Medical Records</div>
        </div>
        {% if user.role == 'doctor' %}
        <div class="stat-card">
            <div class="stat-value">{{ user.prescribed_medications.count }}</div>
            <div class="stat-label">Prescribed Medications</div>
        </div>
        {% endif %}
    </div>
    {% endif %}
    
    <!-- Profile Card -->
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-avatar-large">
                {% if user.profile_picture %}
                    <img src="{{ user.profile_picture.url }}" alt="{{ user.get_full_name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                {% else %}
                    {% if user.first_name %}
                        {{ user.first_name.0 }}{{ user.last_name.0|default:"" }}
                    {% else %}
                        {{ user.username.0|upper }}
                    {% endif %}
                {% endif %}
            </div>
            <div class="profile-info">
                <div class="profile-name">{{ user.get_full_name|default:user.username }}</div>
                <div class="profile-role">{{ user.get_role_display }}</div>
                <span class="profile-badge">
                    <i class="fas fa-shield-alt"></i> {{ user.username }}
                </span>
            </div>
            <a href="{% url 'custom_admin:profile_edit' %}" class="btn-edit-profile">
                <i class="fas fa-edit"></i> Edit Profile
            </a>
        </div>
        
        <div class="profile-details">
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-envelope"></i> Email Address
                </div>
                <div class="detail-value {% if not user.email %}empty{% endif %}">
                    {{ user.email|default:"No email provided" }}
                </div>
            </div>
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-phone"></i> Phone Number
                </div>
                <div class="detail-value {% if not user.phone %}empty{% endif %}">
                    {{ user.phone|default:"No phone number" }}
                </div>
            </div>
            
            {% if user.role == 'doctor' %}
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-stethoscope"></i> Specialization
                </div>
                <div class="detail-value {% if not user.specialization %}empty{% endif %}">
                    {{ user.specialization|default:"Not specified" }}
                </div>
            </div>
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-id-card"></i> License Number
                </div>
                <div class="detail-value {% if not user.license_number %}empty{% endif %}">
                    {{ user.license_number|default:"Not provided" }}
                </div>
            </div>
            {% endif %}
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-user-tag"></i> User Role
                </div>
                <div class="detail-value">
                    {{ user.get_role_display }}
                </div>
            </div>
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-calendar-alt"></i> Member Since
                </div>
                <div class="detail-value">
                    {{ user.date_joined|date:"F j, Y" }}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Additional Information -->
    <div class="profile-card">
        <h3 style="color: var(--dark); margin-bottom: 1.5rem; font-weight: 700;">
            <i class="fas fa-info-circle"></i> Account Information
        </h3>
        <div class="profile-details">
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-user"></i> Username
                </div>
                <div class="detail-value">
                    {{ user.username }}
                </div>
            </div>
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-clock"></i> Last Login
                </div>
                <div class="detail-value">
                    {{ user.last_login|date:"F j, Y, g:i A"|default:"Never" }}
                </div>
            </div>
            
            <div class="detail-item">
                <div class="detail-label">
                    <i class="fas fa-check-circle"></i> Account Status
                </div>
                <div class="detail-value">
                    <span style="color: #4caf50; font-weight: 600;">
                        <i class="fas fa-circle" style="font-size: 0.5rem;"></i> Active
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
